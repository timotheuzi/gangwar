{% extends "base.html" %}

{% block content %}
<div class="bank-screen" style="max-width: 1000px; margin: 0 auto; padding: 10px;">
    <h2 style="margin: 5px 0; font-size: 1.5em;">Savings and Loan</h2>
    <p style="margin: 5px 0; font-size: 0.9em;">Keep your money safe and earn interest on your savings.</p>
    
    <div class="bank-info" style="margin: 10px 0; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
        <h3 style="margin: 0 0 8px 0; font-size: 1.1em;">Account Information</h3>
        <div class="account-details" style="font-size: 0.9em; line-height: 1.3;">
            <p style="margin: 2px 0;"><strong>Cash on Hand:</strong> ${{ "{:,}".format(game_state.money) }}</p>
            <p style="margin: 2px 0;"><strong>Savings Account:</strong> ${{ "{:,}".format(game_state.account|int) }}</p>
            {% if game_state.account|int > 0 %}
            <p style="margin: 2px 0; font-size: 0.8em;"><em>Savings earn 8-10% daily interest</em></p>
            {% endif %}
            <p style="margin: 2px 0;"><strong>Outstanding Loan:</strong> ${{ "{:,}".format(game_state.loan|int) }}</p>
            {% if game_state.loan|int > 0 %}
            <p style="margin: 2px 0; font-size: 0.8em;"><em>Loan accrues 15% daily interest - {{ game_state.loan_days|int }} days since taken</em></p>
            {% endif %}
        </div>
    </div>
    
    <div class="bank-services" style="display: flex; flex-wrap: wrap; gap: 10px; margin: 10px 0;">
        <div class="service-section" style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <h3 style="margin: 0 0 8px 0; font-size: 1em;">Deposit Money</h3>
            <form method="POST" action="{{ url_for('bank_transaction') }}" style="margin: 0;">
                <input type="hidden" name="action" value="deposit">
                <div class="form-group" style="margin-bottom: 8px;">
                    <label for="deposit_amount" style="display: block; margin-bottom: 2px; font-size: 0.8em;">Amount:</label>
                    <input type="number" name="amount" id="deposit_amount" min="1" max="{{ game_state.money }}" value="1000" required style="width: 100%; padding: 4px; font-size: 0.9em;">
                </div>
                <button type="submit" class="btn btn-primary" style="padding: 4px 8px; font-size: 0.8em;">Deposit</button>
            </form>
        </div>

        <div class="service-section" style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <h3 style="margin: 0 0 8px 0; font-size: 1em;">Withdraw Money</h3>
            <form method="POST" action="{{ url_for('bank_transaction') }}" style="margin: 0;">
                <input type="hidden" name="action" value="withdraw">
                <div class="form-group" style="margin-bottom: 8px;">
                    <label for="withdraw_amount" style="display: block; margin-bottom: 2px; font-size: 0.8em;">Amount:</label>
                    <input type="number" name="amount" id="withdraw_amount" min="1" max="{{ game_state.account|int }}" value="1000" required style="width: 100%; padding: 4px; font-size: 0.9em;">
                </div>
                <button type="submit" class="btn btn-secondary" style="padding: 4px 8px; font-size: 0.8em;">Withdraw</button>
            </form>
        </div>

        <div class="service-section" style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <h3 style="margin: 0 0 8px 0; font-size: 1em;">Take Out Loan</h3>
            <form method="POST" action="{{ url_for('bank_transaction') }}" style="margin: 0;">
                <input type="hidden" name="action" value="loan">
                <div class="form-group" style="margin-bottom: 8px;">
                    <label for="loan_amount" style="display: block; margin-bottom: 2px; font-size: 0.8em;">Amount:</label>
                    <select name="amount" id="loan_amount" required style="width: 100%; padding: 4px; font-size: 0.9em;">
                        <option value="5000">$5,000</option>
                        <option value="10000">$10,000</option>
                        <option value="25000">$25,000</option>
                        <option value="50000">$50,000</option>
                        <option value="100000">$100,000</option>
                        <option value="200000">$200,000</option>
                        <option value="300000">$300,000</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-danger" style="padding: 4px 8px; font-size: 0.8em;">Get Loan</button>
            </form>
        </div>

        <div class="service-section" style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <h3 style="margin: 0 0 8px 0; font-size: 1em;">Pay Off Loan</h3>
            <form method="POST" action="{{ url_for('bank_transaction') }}" style="margin: 0;">
                <input type="hidden" name="action" value="pay_loan">
                <div class="form-group" style="margin-bottom: 8px;">
                    <label for="pay_loan_amount" style="display: block; margin-bottom: 2px; font-size: 0.8em;">Amount:</label>
                    <input type="number" name="amount" id="pay_loan_amount" min="1" max="{{ game_state.loan|int }}" value="{{ game_state.loan|int }}" required style="width: 100%; padding: 4px; font-size: 0.9em;">
                </div>
                <button type="submit" class="btn btn-warning" style="padding: 4px 8px; font-size: 0.8em;">Pay Loan</button>
            </form>
        </div>
    </div>
    
    <div class="bank-tips" style="margin: 10px 0; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
        <h3 style="margin: 0 0 8px 0; font-size: 1em;">Banking Tips</h3>
        <ul style="margin: 0; padding-left: 20px; font-size: 0.8em; line-height: 1.3;">
            <li>Keep money in savings for emergencies</li>
            <li>Pay loans quickly - 15% daily interest</li>
            <li>Don't carry all cash on streets</li>
            <li>Bank is safest for your money</li>
        </ul>
    </div>

    <div class="actions" style="text-align: center; margin: 10px 0;">
        <a href="{{ url_for('city') }}" class="btn btn-primary" style="padding: 6px 12px; font-size: 0.9em;">Back to City</a>
    </div>


</div>
{% endblock %}
