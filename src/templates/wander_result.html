{% extends "base.html" %}

{% block content %}
<div class="event-screen">
    <h2>Walking Around the City</h2>

    <div class="event-message">
        <p>{{ result or "You wander around the city without incident." }}</p>
    </div>

    {% if game_state %}
    <div class="current-status">
        <h3>Current Status:</h3>
        <p>Money: ${{ "{:,}".format(game_state.money) if game_state.money else "0" }}</p>
        <p>Health: {{ game_state.health - game_state.damage }}</p>
        {% if game_state.drugs %}
        <p>Drugs:
            {{ game_state.drugs.weed if game_state.drugs.weed else 0 }} weed,
            {{ game_state.drugs.crack if game_state.drugs.crack else 0 }} crack,
            {{ game_state.drugs.coke if game_state.drugs.coke else 0 }} cocaine,
            {{ game_state.drugs.ice if game_state.drugs.ice else 0 }} ice,
            {{ game_state.drugs.percs if game_state.drugs.percs else 0 }} percs,
            {{ game_state.drugs.pixie_dust if game_state.drugs.pixie_dust else 0 }} pixie dust
        </p>
        {% endif %}
        <p>Weapons:
            {% if game_state.weapons.pistols > 0 %}Pistols: {{ game_state.weapons.pistols }}{% if game_state.weapons.pistol_automatic %} (auto){% endif %}{% if game_state.weapons.ghost_guns > 0 or game_state.weapons.ar15 > 0 or game_state.weapons.vampire_bat > 0 or game_state.weapons.knife > 0 or game_state.weapons.sword > 0 or game_state.weapons.axe > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.ghost_guns > 0 %}Ghost Guns: {{ game_state.weapons.ghost_guns }}{% if game_state.weapons.ghost_gun_automatic %} (auto){% endif %}{% if game_state.weapons.ar15 > 0 or game_state.weapons.vampire_bat > 0 or game_state.weapons.knife > 0 or game_state.weapons.sword > 0 or game_state.weapons.axe > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.ar15 > 0 %}AR-15: {{ game_state.weapons.ar15 }}{% if game_state.weapons.vampire_bat > 0 or game_state.weapons.knife > 0 or game_state.weapons.sword > 0 or game_state.weapons.axe > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.vampire_bat > 0 %}Vampire Bats: {{ game_state.weapons.vampire_bat }}{% if game_state.weapons.knife > 0 or game_state.weapons.sword > 0 or game_state.weapons.axe > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.knife > 0 %}Knives: {{ game_state.weapons.knife }}{% if game_state.weapons.sword > 0 or game_state.weapons.axe > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.sword > 0 %}Swords: {{ game_state.weapons.sword }}{% if game_state.weapons.axe > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.axe > 0 %}Axes: {{ game_state.weapons.axe %}{% endif %}
        </p>
        <p>Ammunition:
            {% if game_state.weapons.bullets > 0 %}Bullets: {{ game_state.weapons.bullets }}{% if game_state.weapons.exploding_bullets > 0 or game_state.weapons.hollow_point_bullets > 0 or game_state.weapons.grenades > 0 or game_state.weapons.missile_launcher > 0 or game_state.weapons.missiles > 0 or game_state.weapons.vest > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.exploding_bullets > 0 %}Exploding Bullets: {{ game_state.weapons.exploding_bullets }}{% if game_state.weapons.hollow_point_bullets > 0 or game_state.weapons.grenades > 0 or game_state.weapons.missile_launcher > 0 or game_state.weapons.missiles > 0 or game_state.weapons.vest > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.hollow_point_bullets > 0 %}Hollow Point Bullets: {{ game_state.weapons.hollow_point_bullets }}{% if game_state.weapons.grenades > 0 or game_state.weapons.missile_launcher > 0 or game_state.weapons.missiles > 0 or game_state.weapons.vest > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.grenades > 0 %}Grenades: {{ game_state.weapons.grenades }}{% if game_state.weapons.missile_launcher > 0 or game_state.weapons.missiles > 0 or game_state.weapons.vest > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.missile_launcher > 0 %}Missile Launchers: {{ game_state.weapons.missile_launcher }}{% if game_state.weapons.missiles > 0 or game_state.weapons.vest > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.missiles > 0 %}Missiles: {{ game_state.weapons.missiles }}{% if game_state.weapons.vest > 0 %} | {% endif %}{% endif %}
            {% if game_state.weapons.vest > 0 %}Vest Hits: {{ game_state.weapons.vest }}{% endif %}
        </p>
    </div>
    {% endif %}

    <div class="actions">
        <a href="{{ url_for('city') }}" class="btn btn-primary">Continue</a>
        <a href="{{ url_for('wander') }}" class="btn btn-secondary">Wander More</a>
    </div>
</div>
{% endblock %}
