{% extends "base.html" %}

{% block content %}
<div class="gunshack-screen">
    <h2>The Boom Shack</h2>
    <p>Get armed and dangerous! Stock up on weapons and protection.</p>
    
    <div class="weapon-grid">
        <div class="weapon-item">
            <h4>Pistol</h4>
            <p>Price: $1,200</p>
            <p>You have: {{ game_state.weapons.pistols }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="pistol">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Pistol</button>
            </form>
        </div>
        
        <div class="weapon-item">
            <h4>Bullets (50 pack)</h4>
            <p>Price: $100</p>
            <p>You have: {{ game_state.weapons.bullets }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="bullets">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Bullets</button>
            </form>
        </div>

        <div class="weapon-item">
            <h4>Exploding Bullets (50 pack)</h4>
            <p>Price: $500</p>
            <p>You have: {{ game_state.weapons.exploding_bullets }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="exploding_bullets">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Exploding Bullets</button>
            </form>
        </div>
        
        <div class="weapon-item">
            <h4>Uzi</h4>
            <p>Price: $100,000</p>
            <p>You have: {{ game_state.weapons.uzis }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="uzi">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Uzi</button>
            </form>
        </div>
        
        <div class="weapon-item">
            <h4>Grenade</h4>
            <p>Price: $1,000</p>
            <p>You have: {{ game_state.weapons.grenades }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="grenade">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Grenade</button>
            </form>
        </div>

        <div class="weapon-item">
            <h4>Vampire Bat</h4>
            <p>Price: $2,500</p>
            <p>You have: {{ game_state.weapons.vampire_bat }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="vampire_bat">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Vampire Bat</button>
            </form>
        </div>
        
        <div class="weapon-item">
            <h4>Missile Launcher</h4>
            <p>Price: $1,000,000</p>
            <p>You have: {{ game_state.weapons.missile_launcher }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="missile_launcher">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Launcher</button>
            </form>
        </div>
        
        <div class="weapon-item">
            <h4>Missile</h4>
            <p>Price: $100,000</p>
            <p>You have: {{ game_state.weapons.missiles }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="missile">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy Missile</button>
            </form>
        </div>

        <div class="weapon-item">
            <h4>AR-15</h4>
            <p>Price: $50,000</p>
            <p>You have: {{ game_state.weapons.ar15 }}</p>
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="ar15">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-primary">Buy AR-15</button>
            </form>
        </div>


    </div>
    
    <div class="upgrade-section">
        <h3>Weapon Upgrades</h3>
        <p>Upgrade your weapons for better performance!</p>
        <div class="upgrade-options">
            {% if game_state.weapons.pistols > 0 and not game_state.weapons.pistol_automatic %}
            <form method="POST" action="{{ url_for('upgrade_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="pistol">
                <button type="submit" class="btn btn-warning">Upgrade Pistol to Automatic ($15,000)</button>
            </form>
            {% elif game_state.weapons.pistol_automatic %}
            <p>✅ Pistol is already automatic</p>
            {% endif %}

            {% if game_state.weapons.ghost_guns > 0 and not game_state.weapons.ghost_gun_automatic %}
            <form method="POST" action="{{ url_for('upgrade_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="ghost_gun">
                <button type="submit" class="btn btn-warning">Upgrade Ghost Gun to Automatic ($10,000)</button>
            </form>
            {% elif game_state.weapons.ghost_gun_automatic %}
            <p>✅ Ghost Gun is already automatic</p>
            {% endif %}
        </div>
    </div>

    <div class="vest-section">
        <h3>Body Armor</h3>
        <p>Current protection: {{ game_state.weapons.vest }} hits</p>
        <div class="vest-options">
            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="vest_light">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-secondary">Light Vest ($15,000) - 5 hits</button>
            </form>

            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="vest_medium">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-secondary">Medium Vest ($25,000) - 10 hits</button>
            </form>

            <form method="POST" action="{{ url_for('buy_weapon') }}" class="inline-form">
                <input type="hidden" name="weapon_type" value="vest_heavy">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-secondary">Heavy Vest ($35,000) - 15 hits</button>
            </form>
        </div>
    </div>
    
    <div class="actions">
        <a href="{{ url_for('city') }}" class="btn btn-primary">Back to City</a>
    </div>
</div>
{% endblock %}
