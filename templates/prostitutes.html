{% extends "base.html" %}

{% block content %}
<div class="prostitutes-screen">
    <h2>üíã X-Rated Services üíã</h2>
    <p class="warning">‚ö†Ô∏è WARNING: These encounters can be dangerous! Prostitutes may heal you... or kill you. Choose wisely!</p>

    <div class="prostitutes-grid">
        {% for prostitute in prostitutes %}
        <div class="prostitute-card risk-{{ prostitute.risk_level }}">
            <h3>{{ prostitute.name }}</h3>
            <div class="prostitute-price">
                <span class="price">${{ prostitute.price }}</span>
                <span class="risk-badge risk-{{ prostitute.risk_level }}">{{ prostitute.risk_level|upper }} RISK</span>
            </div>

            <p class="description">{{ prostitute.description }}</p>

            <div class="stats">
                <div class="stat">
                    <span class="label">Healing:</span>
                    <span class="value">{{ prostitute.healing_amount }} HP</span>
                </div>
                <div class="stat">
                    <span class="label">Death Risk:</span>
                    <span class="value">{{ prostitute.death_risk }}%</span>
                </div>
                <div class="stat">
                    <span class="label">Death Method:</span>
                    <span class="value">{{ prostitute.death_method|upper }}</span>
                </div>
            </div>

            {% if game_state.money >= prostitute.price %}
            <form method="POST" action="{{ url_for('visit_prostitutes') }}">
                <input type="hidden" name="prostitute_name" value="{{ prostitute.name }}">
                <button type="submit" class="btn btn-danger">Hire {{ prostitute.name }}</button>
            </form>
            {% else %}
            <button class="btn btn-secondary" disabled>Not enough money</button>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <div class="risk-explanation">
        <h3>Risk Levels Explained:</h3>
        <ul>
            <li><strong class="risk-low">LOW RISK:</strong> Safe encounters, minimal danger</li>
            <li><strong class="risk-medium">MEDIUM RISK:</strong> Moderate danger, good rewards</li>
            <li><strong class="risk-high">HIGH RISK:</strong> Very dangerous, but best healing</li>
        </ul>

        <h3>Death Methods:</h3>
        <ul>
            <li><strong>AIDS:</strong> Slow, painful death from disease</li>
            <li><strong>GUN:</strong> Instant death from gunshot</li>
            <li><strong>KNIFE:</strong> Throat slit while in bed</li>
        </ul>
    </div>

    <div class="actions">
        <a href="{{ url_for('crackhouse') }}" class="btn btn-primary">Back to Crack House</a>
    </div>

    <div class="chat-pvp-container">
        <div class="chat-section">
            <h4>Prostitutes Chat</h4>
            <div id="chat-messages" class="chat-messages"></div>
            <div class="chat-input">
                <input type="text" id="chat-input" placeholder="Type your message..." maxlength="200">
                <button id="send-chat" class="btn btn-primary btn-small">Send</button>
            </div>
        </div>

        <!-- Chat Users Section -->
        <div class="pvp-section">
            <h3>üë• Chat Users</h3>
            <div id="pvp-player-list" class="pvp-player-list">
                <p>Loading users...</p>
            </div>
            <div id="player-list"></div>
            <div class="pvp-actions">
                <button onclick="refreshPlayerList()" class="btn btn-secondary btn-small">Refresh Users</button>
            </div>
        </div>
    </div>
</div>

<style>
.prostitutes-screen {
    max-width: 1200px;
    margin: 0 auto;
}

.warning {
    background: #000000;
    color: white;
    padding: 15px;
    border-radius: 5px;
    margin-bottom: 20px;
    text-align: center;
    font-weight: bold;
}

.prostitutes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.prostitute-card {
    border: 2px solid #333;
    border-radius: 10px;
    padding: 20px;
    background: #1a1a1a;
    position: relative;
}

.prostitute-card.risk-low { border-color: #4CAF50; }
.prostitute-card.risk-medium { border-color: #FF9800; }
.prostitute-card.risk-high { border-color: #F44336; }

.prostitute-card h3 {
    margin-top: 0;
    color: #FFD700;
    text-align: center;
}

.prostitute-price {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.price {
    font-size: 24px;
    font-weight: bold;
    color: #4CAF50;
}

.risk-badge {
    padding: 5px 10px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: bold;
}

.risk-low { background: #4CAF50; color: white; }
.risk-medium { background: #FF9800; color: black; }
.risk-high { background: #F44336; color: white; }

.description {
    margin-bottom: 15px;
    font-style: italic;
    color: #ccc;
}

.stats {
    margin-bottom: 15px;
}

.stat {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.label {
    font-weight: bold;
    color: #FFD700;
}

.value {
    color: #4CAF50;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.risk-explanation {
    background: #2a2a2a;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
}

.risk-explanation h3 {
    color: #FFD700;
    margin-top: 0;
}

.risk-explanation ul {
    margin: 10px 0;
    padding-left: 20px;
}

.risk-explanation li {
    margin-bottom: 5px;
}
</style>
{% endblock %}
