{% extends "base.html" %}

{% block content %}
<div class="high-scores-page">
    <h2>All-Time High Scores</h2>

    <div class="high-scores-content">
        {% if high_scores %}
            <div class="scores-list">
                {% for score in high_scores %}
                <div class="score-entry">
                    <div class="score-rank">#{{ loop.index }}</div>
                    <div class="score-details">
                        <div class="player-info">
                            <strong>{{ score.player_name }}</strong> - {{ score.gang_name }}
                        </div>
                        <div class="score-breakdown">
                            <span class="total-score">Score: {{ "{:,}".format(score.score) }}</span>
                            <div class="score-components">
                                <small>Money: ${{ "{:,}".format(score.money_earned) }}</small>
                                <small>Days: {{ score.days_survived }}</small>
                                <small>Gang Wars: {{ score.gang_wars_won }}</small>
                                <small>Fights: {{ score.fights_won }}</small>
                            </div>
                        </div>
                        <div class="score-date">
                            <small>{{ score.date_achieved }}</small>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No high scores yet. Be the first to set a record!</p>
        {% endif %}
    </div>

    <div class="actions">
        <a href="{{ url_for('credits') }}" class="btn btn-primary">Back to Credits</a>
    </div>

    <div class="chat-pvp-container">
        <div class="chat-section">
            <h4>City Chat</h4>
            <div id="chat-messages" class="chat-messages"></div>
            <div class="chat-input">
                <input type="text" id="chat-input" placeholder="Type your message..." maxlength="200">
                <button id="send-chat" class="btn btn-primary btn-small">Send</button>
            </div>
        </div>

        <!-- Chat Users Section -->
        <div class="pvp-section">
            <h3>ðŸ‘¥ Chat Users</h3>
            <div id="pvp-player-list" class="pvp-player-list">
                <p>Loading users...</p>
            </div>
            <div class="pvp-actions">
                <button id="refresh-players" onclick="refreshPlayerList()" class="btn btn-secondary btn-small">Refresh Users</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}
